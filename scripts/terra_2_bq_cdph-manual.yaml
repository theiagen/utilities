main:
  params: [args]
  steps:
    - init:
        assign:
          - projectId: ${sys.get_env("GOOGLE_CLOUD_PROJECT_ID")}
          - region: "us-central1"
          - batchApi: "batch.googleapis.com/v1"
          - batchApiUrl: ${ "https://" + batchApi + "/projects/" + projectId + "/locations/" + region + "/jobs"}
    # AVELLINO
    - ruAVELLINOspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "avellino-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 avellino_specimen avellino_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runAVELLINOspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "avellino-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 avellino_specimen avellino_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ avellino_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # INVITAE
    - runINVITAEspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "invitae-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 invitae_specimen invitae_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runINVITAEspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "invitae-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 invitae_specimen invitae_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ invitae_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # PANGEA
    - runPANGEAspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "rerengade-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 pangea_specimen pangea_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runPANGEAspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "pangea-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 pangea_specimen pangea_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ pangea_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # UCB_IGI
    - runUCIGHTFspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "uci-ghtf-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 uci_ghtf_specimen uci_ghtf_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runUCIGHTFspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "uci-ghtf-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 uci_ghtf_specimen uci_ghtf_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ uci_ghtf_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # UCLA_DIAG
    - runUCLADIAGspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucla-diag-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucla_diag_specimen ucla_diag_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runUCLADIAGspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucla-diag-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucla_diag_specimen ucla_diag_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ ucla_diag_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # UCLA_ESKIN
    - runUCLAESKINspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucla-eskin-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucla_eskin_specimen ucla_eskin_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runUCLAESKINspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucla-eskin-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucla_eskin_specimen ucla_eskin_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ ucla_eskin_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # UCSC
    - runUCSCspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucsc-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucsc_specimen ucsc_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runUCSCspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucsc-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucsc_specimen ucsc_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ ucsc_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # UCSC_SCRM
    - runUCSBARIASspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucsb-arias-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucsb_arias_specimen ucsb_arias_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runUCSBARIASspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucsb-arias-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucsb_arias_specimen ucsb_arias_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ ucsb_arias_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # UCSF_CHIU
    - runUCSFCHIUspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucsf-chiu-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucsf_chiu_specimen ucsf_chiu_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runUCSFCHIUspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucsf-chiu-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucsf_chiu_specimen ucsf_chiu_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ ucsf_chiu_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # UCR
    - runUCRspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucr-looker-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucr_specimen ucr_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runUCRspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "ucr-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 ucr_specimen ucr_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ ucr_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # VBL_COMBINED
    - runVBLCOMBINEDspecimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "vbl-combined-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 vbl_combined_specimen vbl_combined_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runVBLCOMBINEDspecimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "vbl-combined-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 vbl_combined_specimen vbl_combined_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ vbl_combined_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # VBL_PART2
    - runVBLPART2specimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "vbl-part2-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 vbl_part2_specimen vbl_part2_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runVBLPART2specimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "vbl-part2-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 vbl_part2_specimen vbl_part2_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ vbl_part2_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    # VBL_PART3
    - runVBLPART2specimenLooker:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "vbl-part3-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 vbl_part3_specimen vbl_part3_specimen gs://terra-bq-processing/ date"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
    - runVBLPART3specimenLDS:
        call: http.post
        args:
          url: ${batchApiUrl}
          query:
            job_id: ${ "vbl-part3-lds-" + string(int(sys.now()))}
          headers:
            Content-Type: application/json
          auth:
            type: OAuth2
          body:
            taskGroups:
              - taskSpec:
                  runnables:
                    - container:
                        imageUri: "us-docker.pkg.dev/general-theiagen/theiagen/terra-tools:2023-06-21"
                        entrypoint: "/bin/bash"
                        volumes:
                          - "/mnt/disks/terra_2_bq_cdph:/data"
                          - "/mnt/disks/terra_2_bq_cdph/.config:/.config"
                        commands:
                          - "-c"
                          - ${ "bash terra2bq.sh cdph-terrabio-taborda-manual dataAnalysis_SARS-CoV-2_CDPH_Master_clone_2021-08-24 vbl_part3_specimen vbl_part3_specimen_GDS gs://cdph-terra-dashboard-bucket/dashboard/ vbl_part3_specimen"}
                  volumes:
                    - gcs:
                        remotePath: "terra_2_bq_cdph"
                      mountPath: "/mnt/disks/terra_2_bq_cdph"
                taskCount: 1
            logsPolicy:
              destination: CLOUD_LOGGING
   